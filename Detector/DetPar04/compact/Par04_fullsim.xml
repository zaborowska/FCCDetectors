<?xml version="1.0" encoding="UTF-8"?>
<lccdd xmlns:compact="http://www.lcsim.org/schemas/compact/1.0"
       xmlns:xs="http://www.w3.org/2001/XMLSchema"
       xs:noNamespaceSchemaLocation="http://www.lcsim.org/schemas/compact/1.0/compact.xsd">

  <info name="Par04"
        title="Common settings for reproduction of Par04 detector"
        author="A.Zaborowska"
        url="no"
        status="development"
        version="1.0">
    <comment>
      Common settings for a reproduction of Geant4 examples/extended/parameterisation/Par04 detector.
      Definition of sizes, visualization settings and readout are specified.
    </comment>
  </info>

  <includes>
    <gdmlFile  ref="../../DetCommon/compact/elements.xml"/>
    <gdmlFile  ref="../../DetCommon/compact/materials.xml"/>
  </includes>

  <define>
    <constant name="world_size" value="5*m"/>
    <constant name="world_x" value="world_size"/>
    <constant name="world_y" value="world_size"/>
    <constant name="world_z" value="world_size"/>
    <!-- layer dimensions -->
    <constant name="EMBarrel_numLayers" value="90"/><!-- 1"/> -->
    <constant name="EMBarrel_activeThickness" value="0.3*mm"/>
    <constant name="EMBarrel_passiveThickness" value="1.4*mm"/>
    <constant name="EMBarrel_layerThickness" value="EMBarrel_activeThickness+EMBarrel_passiveThickness"/><!-- 200.25*mm"/> -->
    <!-- calorimeter volume -->
    <constant name="EMBarrel_rmin" value="80*cm"/>
    <constant name="EMBarrel_rmax" value="EMBarrel_rmin+EMBarrel_numLayers*EMBarrel_layerThickness"/>
    <constant name="EMBarrel_dz" value="2*m"/>
  </define>

  <display>
    <vis name="ecal_envelope" r="0.1" g="0.2" b="0.6" alpha="1" showDaughers="false" visible="true" />
  </display>

  <readouts>
    <readout name="ShowerCylinderMesh">
      <!-- using only non-negative identifiers -->
      <id>system:4,layer:7,slice:2,r:5,phi:6,z:6</id>
    </readout>
  </readouts>

  <detectors>
      <detector name="preECalBarrel" type="SimpleCylinder">
        <dimensions rmin="EMBarrel_rmin - 0.02*mm" rmax="EMBarrel_rmin - 0.01*mm" dz="EMBarrel_dz" phi0="0" deltaphi="360*deg" z_offset="0*cm" material="Air"/>
    </detector>

    <detector id="1" name="ECalBarrel" type="SandwichCylinders" readout="ShowerCylinderMesh">
      <sensitive type="DynamicMeshCalorimeterSD"/>
      <dimensions rmin="EMBarrel_rmin" rmax="EMBarrel_rmax" dz="EMBarrel_dz" vis="ecal_envelope"/>
      <layer repeat="EMBarrel_numLayers">
        <slice material = "W" thickness = "EMBarrel_passiveThickness" sensitive="no"/>
        <slice material = "Si" thickness = "EMBarrel_activeThickness" sensitive="yes"/>
        <!-- <slice material = "PbWO4" thickness ="200.25*mm" sensitive="yes"/> -->
      </layer>
    </detector>
  </detectors>

</lccdd>
